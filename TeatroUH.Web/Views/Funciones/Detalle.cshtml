@model TeatroUH.Domain.Entities.Showtime

@{
    ViewData["Title"] = "Detalle de función";
}

<div class="max-w-4xl mx-auto px-6 py-10">

    <div class="mb-8">
        <h1 class="text-3xl font-semibold text-white">Detalle de la función</h1>
        <p class="text-gray-400 mt-1">Información completa de la obra y horario.</p>
    </div>

    <div class="rounded-2xl border border-white/10 bg-black/35 overflow-hidden">

        <div class="p-6 border-b border-white/10 flex items-start justify-between gap-4">
            <div>
                <div class="text-gray-400 text-sm">Obra</div>
                <h2 class="text-2xl font-semibold text-white">
                    🎭 @(Model.Play?.Title ?? $"Obra #{Model.PlayId}")
                </h2>

                <div class="text-gray-400 text-sm mt-2">
                    Teatro:
                    <span class="text-gray-200 font-semibold">
                        @(Model.Theater?.Name ?? $"Teatro #{Model.TheaterId}")
                    </span>
                </div>
            </div>

            <div class="text-right">
                <div class="text-gray-400 text-sm">Precio base</div>
                <div class="text-white text-2xl font-semibold">₡@Model.BasePrice.ToString("N2")</div>
            </div>
        </div>

        <div class="p-6 grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm">
            <div class="rounded-xl border border-white/10 bg-black/30 p-4">
                <div class="text-gray-400">Fecha</div>
                <div class="text-white font-semibold">@Model.StartDateTime.ToString("dd/MM/yyyy")</div>
            </div>

            <div class="rounded-xl border border-white/10 bg-black/30 p-4">
                <div class="text-gray-400">Hora</div>
                <div class="text-white font-semibold">@Model.StartDateTime.ToString("hh:mm tt")</div>
            </div>

            <div class="rounded-xl border border-white/10 bg-black/30 p-4">
                <div class="text-gray-400">Disponibles</div>
                <div class="text-white font-semibold">@Model.SeatsAvailable / @Model.Capacity</div>
            </div>
        </div>

        <div class="p-6 border-t border-white/10">
            <div class="flex flex-col sm:flex-row gap-3">
                <form asp-controller="Carrito" asp-action="Add" method="post" class="sm:flex-1">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="showtimeId" value="@Model.ShowtimeId" />
                    <input type="hidden" name="qty" value="1" />

                    <button type="submit"
                            @(Model.SeatsAvailable <= 0 ? "disabled" : "")
                            class="w-full rounded-lg py-3 font-semibold text-black
                                   bg-[#C9A24D] hover:brightness-110 transition
                                   disabled:opacity-50 disabled:cursor-not-allowed">
                        @(Model.SeatsAvailable <= 0 ? "Sin cupos" : "Agregar al carrito")
                    </button>
                </form>

                <a asp-controller="Funciones" asp-action="Index"
                   class="sm:flex-1 inline-flex items-center justify-center rounded-lg py-3 font-semibold
                          border border-white/15 bg-black/30 text-white hover:bg-black/40 transition">
                    Volver a funciones
                </a>
            </div>
        </div>

    </div>
</div>
